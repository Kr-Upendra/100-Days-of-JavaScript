<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Get Secret | Sign in Form</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="common">
      <a
        href="https://github.com/Kr-Upendra/100-Days-of-JavaScript"
        target="_blank"
        >Find All Projects</a
      >
    </div>
    <div class="gohome">
      <a href="home.html">Home</a>
    </div>
    <div class="container">
      <div class="container__heading">
        <h1>Sign in Form</h1>
      </div>
      <div class="container__form">
        <form class="container__form--box signin__form">
          <input
            type="email"
            name="email"
            class="email__input--signin"
            placeholder="Enter your email"
            required
          />
          <input
            type="password"
            name="password"
            placeholder="Enter your password"
            class="password__input--signin"
            required
          />
          <input type="submit" value="Sign In" class="submit__btn" />
        </form>
        <span class="not__signedin">
          Not a user ?
          <a href="./signup.html">Signup</a>
        </span>
      </div>
    </div>
  </body>
  <script>
    const signinForm = document.querySelector(".signin__form");
    const emailSigninInput = document.querySelector(".email__input--signin");
    const passwordSigninInput = document.querySelector(
      ".password__input--signin"
    );

    signinForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = emailSigninInput.value;
      const password = passwordSigninInput.value;

      const savedEmail = JSON.parse(localStorage.getItem(email));
      if (savedEmail === null) {
        resetForm();
        return alert("Please enter valid email or password!");
      } else if (savedEmail.password != password) {
        resetForm();
        return alert("Please enter valid email or password!");
      } else {
        window.location.href = "secret.html";
      }
    });

    const resetForm = () => {
      emailSigninInput.value = "";
      passwordSigninInput.value = "";
      emailSigninInput.focus();
    };
  </script>
</html>
